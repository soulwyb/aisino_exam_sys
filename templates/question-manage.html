{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}Aisino | 系统 {% endblock %}
{% block custom_css %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'adminlte/iCheck/all.css' %}">
{% endblock %}
{% block content_body %}
  <div class="row">
            <div class="col-xs-12 col-md-12 col-lg-3">
              <div class="margin">
                <button type="button" class="btn btn-primary btn-sm btn-custom" id="create_department">新建</button>
                <button type="button" class="btn btn-info btn-sm btn-custom" id="edit_department">编辑</button>
                <button type="button" class="btn btn-danger btn-sm btn-custom" id="del_department">删除</button>
                <button type="button" class="btn btn-warning btn-sm btn-custom" id="input_department">导入</button>
                <button type="button" class="btn btn-warning btn-sm btn-custom" id="output_department">导出</button>
              </div>
            <div id="custom-tree-js">
            <ul data-widget="tree" id="custom-tree">
              <li class="treeview">
                  <a href="#" id="custom-tree-header">
                    <i class="fa fa-share"></i>
                      <span>所属公司</span>
                  </a>
                  <ul class="treeview-menu">
                    {% for company in companys %}
                    <li class="treeview">
                      <a href="#" class="custom-tree-selected"><i class="fa fa-circle-o"></i> {{ company.name }}
                      </a>
                      <ul class="treeview-menu">
                      {% for department in departments %}
                          {% ifequal department.company.name company.name %}
                            <li class="treeview"><a href="#" class="custom-tree-selected"><i class="fa fa-circle-o"></i>{{ department.name }}</a>
                            <ul class="treeview-menu">
                            {% for group in groups %}
                                {% ifequal group.department.name department.name %}
                                    <li class="treeview"><a href="#" class="custom-tree-selected"><i class="fa fa-circle-o"></i>{{ group.name }}</a>
                                        <ul class="treeview-menu">
                                        {% for question_bank in group.questionbank_set.get_queryset %}
                                            {% ifequal question_bank.group.name group.name %}
                                                <li><a href="#" class="custom-tree-selected" type="question_bank"><i class="fa fa-file-o"></i> {{ question_bank.name }}</a></li>
                                            {% endifequal %}
                                        {% endfor %}
                                        </ul>
                                    </li>
                                {% endifequal %}
                            {% endfor %}
                            {% for question_bank in department.questionbank_set.get_queryset %}
                                {% ifequal question_bank.department.name department.name %}
                                    <li><a href="#" class="custom-tree-selected" type="question_bank"><i class="fa fa-file-o"></i> {{ question_bank.name }}</a></li>
                                {% endifequal %}
                            {% endfor %}
                            </ul>
                            </li>
                        {% endifequal %}
                      {% endfor %}
                      {% for question_bank in company.questionbank_set.get_queryset%}
                          {% ifequal question_bank.company.name company.name %}
                            <li><a href="#" class="custom-tree-selected" type="question_bank"><i class="fa fa-file-o"></i> {{ question_bank.name }}</a></li>
                          {% endifequal %}
                      {% endfor %}
                      </ul>
                    </li>
                  {% endfor %}
                  </ul>
                </li>
             </ul>
            </div>
            </div>
            <!--left_tree-->
            <div class="col-xs-12 col-md-12 col-lg-9">
              <div class="col-md-4 col-lg-4">
                <div class="form-group">
                    <label class="form-label"><span class="fa fa-filter icon-color"></span> 题目类型</label>
                    <select class="form-control select2" style="width: 100%;" name="type">
                      <option selected="selected" value="">所有题型</option>
                      <option value="Single">单选题</option>
                      <option value="Multi">多选题</option>
                      <option value="True_to_False">判断题</option>
                    </select>
                  </div>
              </div>
              <!--select_type-->
              <div class="col-md-4 col-lg-4">
                  <div class="form-group">
                      <label class="form-label"><span class="fa fa-unlock-alt icon-color"></span> 是否有效</label>
                      <select class="form-control select2" style="width: 100%;" name="is_valid">
                        <option selected="selected" value="">所有题型</option>
                        <option value="True">有效</option>
                        <option value="False">无效</option>
                      </select>
                    </div>
                </div>
                <!--select_is_valid-->
                <div class="col-md-4 col-lg-4">
                    <div class="form-group">
                        <label class="form-label"><span class="fa fa-bar-chart-o icon-color"></span> 难度</label>
                        <select class="form-control select2" style="width: 100%;" name="is_valid">
                          <option selected="selected" value="">所有难度</option>
                          <option value="True">简单</option>
                          <option value="False">中等</option>
                          <option value="False">贼难</option>
                        </select>
                      </div>
                  </div>
                  <!--select_degree-->
                  <div clss="row">
                      <div class="col-md-9 col-lg-9">
                        <label class="form-label"><span class="fa fa-bar-chart-o icon-color"></span> 关键字搜索</label>
                          <div class="input-group" id="custom-bottom-layer">
                              <input type="text" class="form-control" name="Keyword">
                                  <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary btn-flat"><span class="fa fa-search"></span></button>
                                  </span>
                          </div>
                    </div>
                  <!--search_keyword-->
                    <div class="col-md-3 col-lg-3">
                        <div class="form-group">
                            <label class="form-label"><span class="fa fa-eye icon-color"></span> 每页显示</label>
                            <select class="form-control">
                              <option selected="selected">20</option>
                              <option>50</option>
                              <option>100</option>
                            </select>
                          </span>
                          </div>
                    </div>
                  </div>
                  <!--search_str_and_paging-->
                  <div class="row">
                      <div class="col-xs-12 col-md-12 col-lg-12">
                          <form action ="" method="post">
                          <table class="table table-bordered table-striped" id="table-top">
                              <tr>
                                <th style="width: 10px">
                                    <div class="form-group">
                                        <input type="checkbox" class="minimal" id="all" onclick="iCheck('fefe')">
                                    </div>
                                </th>
                                <th>类型</th>
                                <th style="width: 55%;">题目</th>
                                <th>难度</th>
                                <th>有效</th>
                              </tr>
                              {% for question in questions %}
                              <tr>
                                <td>
                                  <div class="form-group">
                                  <input type="checkbox" class="minimal" id="question_id" value="1">
                                  </div>
                                </td>
                                <td>
                                    {{ question.type }}
                                </td>
                                <td>
                                  {{ question.name }}
                                </td>
                                <td>{{ question.get_degree_display }}</td>
                                <td>{{ question.get_valid_display }}</td>
                              </tr>
                              {% endfor %}
                            </table>
                              {% csrf_token %}
                              </form>
                        </div>
                  </div>
                  <!--table-->
                  <div class="row">
                    <div class="col-xs-12 col-md-5 col-lg-5">
                      <p>当前显示1至20条记录 总计：{{ questions.count }}条记录</p>
                    </div>
                    <div class="col-xs-12 col-md-7 col-lg-7">
                        <div class="box-tools">
                            <ul class="pagination pagination-sm no-margin pull-right">
                              <li><a href="#">上一页</a></li>
                              <li><a href="#">...</a></li>
                              <li><a href="#">1</a></li>
                              <li><a href="#">2</a></li>
                              <li><a href="#">3</a></li>
                              <li><a href="#">...</a></li>
                              <li><a href="#">下一页</a></li>
                            </ul>
                          </div>
                    </div>
                  </div>
            </div>
            <!--right_content-->
  <div class="alert alert-danger" id="custom-warning-pop">
   <a href="#" class="close">
   <i class="fa fa-close "></i></a>
   <strong>警告！</strong> <span>您未选择相应的组织</span></div>
  <!-- 题库组织添加按钮内容 -->
  <div class="custom-float-question custom-div-hidden" id="custom-float-add">
  <div>
    <section class="content">
        <form>
      <div class="box custom-pop-box">
        <div class="box-header with-border custom-pop-header" id="box-header-style">
          <h3 class="box-title custom-pop-title">添加题库</h3>
        </div>
        <div class="box-body custom-pop-body">
          <div class="form-group">
              <label>类型</label>
              <div class="row" style="margin-left:5%;">
                  <div class="col-xs-12 col-md-4 col-lg-4">
                <label>
                  <input type="radio" name="r1" class="minimal" group-values="department" checked>
                    <span> 部门</span>
                </label>
                      </div>
                    <div class="col-xs-12 col-md-4 col-lg-4">
                <label>
                  <input type="radio" name="r1" class="minimal" group-values="group" >
                    <span> 组织</span>
                </label>
                      </div>
                  <div class="col-xs-12 col-md-4 col-lg-4">
                <label>
                  <input type="radio" name="r1" class="minimal" group-values="question">
                    <span> 题库</span>
                </label>
                  </div>
                  </div>
              </div>
            <div class="form-group custom-add-margin">
                <label>名称</label>
                <input type="text" class="form-control" id="custom-name" placeholder="输入名称" value="">
                <input type="hidden" id="csrf_token" value="{{ csrf_token }}">
            </div>
            <div class="form-group row">
                <div class="col-xs-3 col-md-4 col-lg-4"></div>
                <div class="custom-btn-group">
                <button type="button" class="btn btn-primary" id="custom-add-groups" style="margin-right: 3%;margin-left:-3%;">提交</button>
                <button class="btn btn-primary custom-close-btn">取消</button>
                </div>
            </div>
        </div>
        <!-- /.box-body -->
      </div>
            {% csrf_token %}
        </form>
      <!-- /.box -->
    </section>
    <!-- /.content -->
  </div>
<!-- 弹出层 -->
</div>
  </div>
<!-- 题库组织编辑按钮内容 -->
  <div class="custom-float-question custom-div-hidden" id="custom-float-edit">
  <div>
    <section class="content">
      <div class="box custom-pop-box">
          <form id="jsStayForm">
        <div class="box-header with-border custom-pop-header" id="box-header-style">
          <h3 class="box-title custom-pop-title">编辑题库</h3>
        </div>
        <div class="box-body custom-pop-body">
          <div class="form-group">
              <label>类型</label>
              <div class="row" style="margin-left:5%;">
                  <div class="col-xs-12 col-md-4 col-lg-4">
                <label>
                  <input type="radio" name="r1" class="minimal" value="department"checked>
                    <span> 部门</span>
                </label>
                      </div>
                    <div class="col-xs-12 col-md-4 col-lg-4">
                <label>
                  <input type="radio" name="r1" class="minimal" value="group" >
                    <span> 组织</span>
                </label>
                      </div>
                  <div class="col-xs-12 col-md-4 col-lg-4">
                <label>
                  <input type="radio" name="r1" class="minimal" value="question">
                    <span> 题库</span>
                </label>
                  </div>
                  </div>
              </div>
            <div class="form-group custom-add-margin">
                <label>名称</label>
                <input type="text" class="form-control" id="custom-input-value" placeholder="输入名称" value="">
            </div>
            <div class="form-group row">
                <div class="col-xs-3 col-md-4 col-lg-4"></div>
                <div class="custom-btn-group">
                <button type="submit" class="btn btn-primary" style="margin-right: 3%;margin-left:-3%;">提交</button>
                <button class="btn btn-primary custom-close-btn">取消</button>
                </div>
            </div>
        </div>
          </form>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
    </section>
    <!-- /.content -->
  </div>
<!-- 弹出层 -->
</div>
  </div>
<!-- 题库组织导入按钮内容 -->
  <div class="custom-float-question custom-div-hidden" id="custom-float-input">
  <div>
    <section class="content">
      <div class="box custom-pop-box">
          <form>
        <div class="box-header with-border custom-pop-header" id="box-header-style">
          <h3 class="box-title custom-pop-title">导入题库</h3>
        </div>
        <div class="box-body custom-pop-body">
            <div class="input-group custom-input-margin">
                <label>上传题库</label>
              <input type="file">
          </div>
            <div class="form-group row">
                <div class="col-xs-3 col-md-4 col-lg-4"></div>
                <div class="custom-btn-group">
                <button type="submit" class="btn btn-primary" style="margin-right: 3%;margin-left:-3%;">提交</button>
                <button class="btn btn-primary custom-close-btn">取消</button>
                </div>
            </div>
        </div>
          </form>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
    </section>
    <!-- /.content -->
  </div>
<!-- 弹出层 -->
</div>
  </div>
{% endblock %}
{% block custom_js %}
<script src="{% static 'adminlte/iCheck/icheck.min.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>
<script src="{%  static 'js/zepto.js' %}"></script>
<script src="{% static 'js/question_bank.js' %}"></script>
<script src="{% static 'js/jquery.cookie.js' %}"></script>
<script>
    $('input[type="checkbox"].minimal').iCheck({
      checkboxClass: 'icheckbox_minimal-blue'
    })
</script>
<script>
  $('#all').on('ifChecked', function(event){
    $('input#question_id').iCheck('check');
  });
  $('#all').on('ifUnchecked', function(event){
    $('input#question_id').iCheck('uncheck');
  });
     //iCheck for checkbox and radio inputs
  $('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({
      checkboxClass: 'icheckbox_minimal-blue',
      radioClass   : 'iradio_minimal-blue'
    })
</script>
<script>
    var urls = "{% url 'question_bank:add_group_or_bank' %}"
</script>
<script src="{% static 'js/question-manage.js' %}"></script>
{% endblock %}